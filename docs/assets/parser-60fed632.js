import{l as Ve,i as Be,r as He,a as Ge,o as Ke}from"./colorUtils-639f4d25.js";import{a as $}from"./Error-1dfe2922.js";import{e as Le}from"./screenUtils-7afeb41c.js";import{s as q,o as z}from"./mat4-62d5e6a4.js";function G(){const e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function Qe(e){const n=new Float32Array(16);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n}function We(e,n,u,s,c,g,y,r,w,O,k,N,I,m,x,_){const p=new Float32Array(16);return p[0]=e,p[1]=n,p[2]=u,p[3]=s,p[4]=c,p[5]=g,p[6]=y,p[7]=r,p[8]=w,p[9]=O,p[10]=k,p[11]=N,p[12]=I,p[13]=m,p[14]=x,p[15]=_,p}function Ze(e,n){return new Float32Array(e,n,16)}const tr=G();Object.freeze(Object.defineProperty({__proto__:null,create:G,clone:Qe,fromValues:We,createView:Ze,IDENTITY:tr},Symbol.toStringTag,{value:"Module"}));const er=(e,n)=>{const u=q(e,n,0,0,0,0,n,0,0,0,0,n,0,0,0,0,1);return z(u,u)},rr=(e,n)=>{const u=q(e,n,0,0,.5-.5*n,0,n,0,.5-.5*n,0,0,n,.5-.5*n,0,0,0,1);return z(u,u)},nr=(e,n)=>{const u=1-n,s=q(e,.2126+.7874*u,.7152-.7152*u,.0722-.0722*u,0,.2126-.2126*u,.7152+.2848*u,.0722-.0722*u,0,.2126-.2126*u,.7152-.7152*u,.0722+.9278*u,0,0,0,0,1);return z(s,s)},or=(e,n)=>{const u=Math.sin(n*Math.PI/180),s=Math.cos(n*Math.PI/180),c=q(e,.213+.787*s-.213*u,.715-.715*s-.715*u,.072-.072*s+.928*u,0,.213-.213*s+.143*u,.715+.285*s+.14*u,.072-.072*s-.283*u,0,.213-.213*s-.787*u,.715-.715*s+.715*u,.072+.928*s+.072*u,0,0,0,0,1);return z(c,c)},ar=(e,n)=>{const u=1-2*n,s=q(e,u,0,0,n,0,u,0,n,0,0,u,n,0,0,0,1);return z(s,s)},ur=(e,n)=>{const u=q(e,.213+.787*n,.715-.715*n,.072-.072*n,0,.213-.213*n,.715+.285*n,.072-.072*n,0,.213-.213*n,.715-.715*n,.072+.928*n,0,0,0,0,1);return z(u,u)},ir=(e,n)=>{const u=1-n,s=q(e,.393+.607*u,.769-.769*u,.189-.189*u,0,.349-.349*u,.686+.314*u,.168-.168*u,0,.272-.272*u,.534-.534*u,.131+.869*u,0,0,0,0,1);return z(s,s)};class K{constructor(n,u,s){this.strength=n,this.radius=u,this.threshold=s,this.type="bloom"}interpolate(n,u,s){this.strength=F(n.strength,u.strength,s),this.radius=F(n.radius,u.radius,s),this.threshold=F(n.threshold,u.threshold,s)}clone(){return new K(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:X(this.radius),strength:this.strength,threshold:this.threshold}}}class L{constructor(n){this.radius=n,this.type="blur"}interpolate(n,u,s){this.radius=Math.round(F(n.radius,u.radius,s))}clone(){return new L(this.radius)}toJSON(){return{type:"blur",radius:X(this.radius)}}}class D{constructor(n,u){this.type=n,this.amount=u,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(n,u,s){this.amount=F(n.amount,u.amount,s),this._updateMatrix()}clone(){return new D(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const n=this._colorMatrix||G();switch(this.type){case"brightness":this._colorMatrix=er(n,this.amount);break;case"contrast":this._colorMatrix=rr(n,this.amount);break;case"grayscale":this._colorMatrix=nr(n,this.amount);break;case"invert":this._colorMatrix=ar(n,this.amount);break;case"saturate":this._colorMatrix=ur(n,this.amount);break;case"sepia":this._colorMatrix=ir(n,this.amount)}}}let rt=class{constructor(n,u,s,c){this.offsetX=n,this.offsetY=u,this.blurRadius=s,this.color=c,this.type="drop-shadow"}interpolate(n,u,s){this.offsetX=F(n.offsetX,u.offsetX,s),this.offsetY=F(n.offsetY,u.offsetY,s),this.blurRadius=F(n.blurRadius,u.blurRadius,s),this.color[0]=Math.round(F(n.color[0],u.color[0],s)),this.color[1]=Math.round(F(n.color[1],u.color[1],s)),this.color[2]=Math.round(F(n.color[2],u.color[2],s)),this.color[3]=F(n.color[3],u.color[3],s)}clone(){return new rt(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const n=[...this.color];return n[3]*=255,{type:"drop-shadow",xoffset:X(this.offsetX),yoffset:X(this.offsetY),blurRadius:X(this.blurRadius),color:n}}},nt=class{constructor(n){this.angle=n,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(n,u,s){this.angle=F(n.angle,u.angle,s),this._updateMatrix()}clone(){return new nt(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const n=this._colorMatrix||G();this._colorMatrix=or(n,this.angle)}};class Q{constructor(n){this.amount=n,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(n,u,s){this.amount=F(n.amount,u.amount,s)}clone(){return new Q(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}}function F(e,n,u){return e+(n-e)*u}function X(e){return Math.round(1e3*Le(e))/1e3}function cr(e){switch(e.type){case"grayscale":case"sepia":case"invert":return new D(e.type,0);case"saturate":case"brightness":case"contrast":return new D(e.type,1);case"opacity":return new Q(1);case"hue-rotate":return new nt(0);case"blur":return new L(0);case"drop-shadow":return new rt(0,0,0,[...Ve("transparent")]);case"bloom":return new K(0,0,1)}}function sr(e,n){const u=e.length>n.length?e:n;return(e.length>n.length?n:e).every((s,c)=>s.type===u[c].type)}function lr(e,n){const u=e.length>n.length?e:n,s=e.length>n.length?n:e;for(let c=s.length;c<u.length;c++)s.push(cr(u[c]))}function jr(e){const n=e[0];return!!n&&"type"in n}var Ot,St,kt={exports:{}};function Ir(e){if(!e||e.length===0)return null;if(typeof e=="string"){const u=Rt(e);return u&&u.length!==0?u:null}const n=e.map(u=>{if(!Number.isFinite(u.scale)||u.scale<=0)throw new $("effect:invalid-scale","scale must be finite and greater than 0",{stop:u});return{scale:u.scale,effects:Rt(u.value)}});n.sort((u,s)=>s.effects.length-u.effects.length);for(let u=0;u<n.length-1;u++){if(!sr(n[u].effects,n[u+1].effects))throw new $("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:n[u].effects,b:n[u+1].effects});lr(n[u].effects,n[u+1].effects)}return n.sort((u,s)=>s.scale-u.scale),n}function Rt(e){let n;if(!e)return[];try{n=kt.exports.parse(e)}catch(u){throw new $("effect:invalid-syntax","Invalid effect syntax",{value:e,error:u})}return n.map(u=>fr(u))}function fr(e){try{switch(e.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return hr(e);case"opacity":return pr(e);case"hue-rotate":return mr(e);case"blur":return gr(e);case"drop-shadow":return dr(e);case"bloom":return yr(e)}}catch(n){throw n.details.filter=e,n}throw new $("effect:unknown-effect",`Effect '${e.name}' is not supported`,{effect:e})}function hr(e){let n=1;return J(e.parameters,1),e.parameters.length===1&&(n=S(e.parameters[0])),new D(e.name,n)}function pr(e){let n=1;return J(e.parameters,1),e.parameters.length===1&&(n=S(e.parameters[0])),new Q(n)}function mr(e){let n=0;return J(e.parameters,1),e.parameters.length===1&&(n=Mr(e.parameters[0])),new nt(n)}function gr(e){let n=0;return J(e.parameters,1),e.parameters.length===1&&(n=ut(e.parameters[0]),U(n,e.parameters[0])),new L(n)}function dr(e){const n=[];let u=null;for(const s of e.parameters)if(s.type==="color"){if(n.length&&Object.freeze(n),u)throw new $("effect:type-error","Accepts only one color",{});u=$r(s)}else{const c=ut(s);if(Object.isFrozen(n))throw new $("effect:type-error","<length> parameters not consecutive",{lengths:n});n.push(c),n.length===3&&U(c,s)}if(n.length<2||n.length>3)throw new $("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${n.length}}`,{lengths:n});return new rt(n[0],n[1],n[2]||0,u||Nt("black"))}function yr(e){let n=1,u=0,s=0;return J(e.parameters,3),e.parameters[0]&&(n=S(e.parameters[0])),e.parameters[1]&&(u=ut(e.parameters[1]),U(u,e.parameters[1])),e.parameters[2]&&(s=S(e.parameters[2])),new K(n,u,s)}function J(e,n){if(e.length>n)throw new $("effect:type-error",`Function supports up to ${n} parameters, Actual: ${e.length}`,{parameters:e})}function W(e){if(e.type==="color")return"<color>";if(e.unit){if(at[e.unit])return"<length>";if(ot[e.unit])return"<angle>";if(e.unit==="%")return"<percentage>"}return"<double>"}function U(e,n){if(e<0)throw new $("effect:type-error",`Negative values are not allowed, Actual: ${e}`,{term:n})}function vr(e){if(e.type!=="quantity"||e.unit!==null)throw new $("effect:type-error",`Expected <double>, Actual: ${W(e)}`,{term:e})}function wr(e){if(e.type!=="quantity"||e.unit!==null&&e.unit!=="%")throw new $("effect:type-error",`Expected <double> or <percentage>, Actual: ${W(e)}`,{term:e})}St=function(){function e(c,g){function y(){this.constructor=c}y.prototype=g.prototype,c.prototype=new y}function n(c,g,y,r){var w=Error.call(this,c);return Object.setPrototypeOf&&Object.setPrototypeOf(w,n.prototype),w.expected=g,w.found=y,w.location=r,w.name="SyntaxError",w}function u(c,g,y){return y=y||" ",c.length>g?c:(g-=c.length,c+(y+=y.repeat(g)).slice(0,g))}function s(c,g){var y,r={},w=(g=g!==void 0?g:{}).grammarSource,O={start:Ct},k=Ct,N="none",I=")",m=",",x="(",_="%",p="px",it="cm",ct="mm",st="in",lt="pt",ft="pc",ht="deg",pt="rad",mt="grad",gt="turn",jt="#",It=".",Pt="e",dt=/^[ \t\n\r]/,yt=/^[a-z\-]/,vt=/^[0-9a-fA-F]/,wt=/^[+\-]/,P=/^[0-9]/,Yt=j("none"),qt=A("none",!1),zt=A(")",!1),xt=A(",",!1),Jt=j("whitespace"),At=T([" ","	",`
`,"\r"],!1,!1),Tt=j("function"),Xt=A("(",!1),Dt=j("identifier"),bt=T([["a","z"],"-"],!1,!1),Ut=j("percentage"),Vt=A("%",!1),Bt=j("length"),Ht=A("px",!1),Gt=A("cm",!1),Kt=A("mm",!1),Lt=A("in",!1),Qt=A("pt",!1),Wt=A("pc",!1),Zt=j("angle"),te=A("deg",!1),ee=A("rad",!1),re=A("grad",!1),ne=A("turn",!1),oe=j("number"),ae=j("color"),ue=A("#",!1),Mt=T([["0","9"],["a","f"],["A","F"]],!1,!1),$t=T(["+","-"],!1,!1),Y=T([["0","9"]],!1,!1),ie=A(".",!1),ce=A("e",!1),se=function(){return[]},le=function(t,a){return{type:"function",name:t,parameters:a||[]}},fe=function(t,a){return a.length>0?Ue(t,a,3):[t]},he=function(t){return{type:"quantity",value:t.value,unit:t.unit}},pe=function(t){return{type:"color",colorType:t.type,value:t.value}},me=function(t){return t},ge=function(){return B()},de=function(t){return{value:t,unit:"%"}},ye=function(t){return{value:t,unit:"px"}},ve=function(t){return{value:t,unit:"cm"}},we=function(t){return{value:t,unit:"mm"}},xe=function(t){return{value:t,unit:"in"}},Ae=function(t){return{value:t,unit:"pt"}},be=function(t){return{value:t,unit:"pc"}},Me=function(t){return{value:t,unit:"deg"}},$e=function(t){return{value:t,unit:"rad"}},Fe=function(t){return{value:t,unit:"grad"}},_e=function(t){return{value:t,unit:"turn"}},Ce=function(t){return{value:t,unit:null}},Ee=function(){return{type:"hex",value:B()}},Oe=function(t){return{type:"function",value:t}},Se=function(){return{type:"named",value:B()}},Re=function(){return parseFloat(B())},o=0,d=0,V=[{line:1,column:1}],R=0,Z=[],l=0;if("startRule"in g){if(!(g.startRule in O))throw new Error(`Can't start parsing from rule "`+g.startRule+'".');k=O[g.startRule]}function B(){return c.substring(d,o)}function A(t,a){return{type:"literal",text:t,ignoreCase:a}}function T(t,a,i){return{type:"class",parts:t,inverted:a,ignoreCase:i}}function ke(){return{type:"end"}}function j(t){return{type:"other",description:t}}function Ft(t){var a,i=V[t];if(i)return i;for(a=t-1;!V[a];)a--;for(i={line:(i=V[a]).line,column:i.column};a<t;)c.charCodeAt(a)===10?(i.line++,i.column=1):i.column++,a++;return V[t]=i,i}function _t(t,a){var i=Ft(t),h=Ft(a);return{source:w,start:{offset:t,line:i.line,column:i.column},end:{offset:a,line:h.line,column:h.column}}}function f(t){o<R||(o>R&&(R=o,Z=[]),Z.push(t))}function Ne(t,a,i){return new n(n.buildMessage(t,a),t,a,i)}function Ct(){var t;return(t=je())===r&&(t=Ie()),t}function je(){var t,a;return l++,t=o,b(),c.substr(o,4)===N?(a=N,o+=4):(a=r,l===0&&f(qt)),a!==r?(b(),d=t,t=se()):(o=t,t=r),l--,t===r&&l===0&&f(Yt),t}function Ie(){var t,a;if(t=[],(a=tt())!==r)for(;a!==r;)t.push(a),a=tt();else t=r;return t}function tt(){var t,a,i,h;return t=o,b(),(a=Ye())!==r?(b(),(i=Pe())===r&&(i=null),b(),c.charCodeAt(o)===41?(h=I,o++):(h=r,l===0&&f(zt)),h!==r?(b(),d=t,t=le(a,i)):(o=t,t=r)):(o=t,t=r),t}function Pe(){var t,a,i,h,M,v,E,H;if(t=o,(a=et())!==r){for(i=[],h=o,M=b(),c.charCodeAt(o)===44?(v=m,o++):(v=r,l===0&&f(xt)),v===r&&(v=null),E=b(),(H=et())!==r?h=M=[M,v,E,H]:(o=h,h=r);h!==r;)i.push(h),h=o,M=b(),c.charCodeAt(o)===44?(v=m,o++):(v=r,l===0&&f(xt)),v===r&&(v=null),E=b(),(H=et())!==r?h=M=[M,v,E,H]:(o=h,h=r);d=t,t=fe(a,i)}else o=t,t=r;return t}function et(){var t,a;return t=o,(a=qe())===r&&(a=ze())===r&&(a=Je())===r&&(a=Te()),a!==r&&(d=t,a=he(a)),(t=a)===r&&(t=o,(a=Xe())!==r&&(d=t,a=pe(a)),t=a),t}function b(){var t,a;for(l++,t=[],dt.test(c.charAt(o))?(a=c.charAt(o),o++):(a=r,l===0&&f(At));a!==r;)t.push(a),dt.test(c.charAt(o))?(a=c.charAt(o),o++):(a=r,l===0&&f(At));return l--,a=r,l===0&&f(Jt),t}function Ye(){var t,a,i;return l++,t=o,(a=Et())!==r?(c.charCodeAt(o)===40?(i=x,o++):(i=r,l===0&&f(Xt)),i!==r?(d=t,t=me(a)):(o=t,t=r)):(o=t,t=r),l--,t===r&&(a=r,l===0&&f(Tt)),t}function Et(){var t,a,i;if(l++,t=o,a=[],yt.test(c.charAt(o))?(i=c.charAt(o),o++):(i=r,l===0&&f(bt)),i!==r)for(;i!==r;)a.push(i),yt.test(c.charAt(o))?(i=c.charAt(o),o++):(i=r,l===0&&f(bt));else a=r;return a!==r&&(d=t,a=ge()),l--,(t=a)===r&&(a=r,l===0&&f(Dt)),t}function qe(){var t,a,i;return l++,t=o,b(),(a=C())!==r?(c.charCodeAt(o)===37?(i=_,o++):(i=r,l===0&&f(Vt)),i!==r?(d=t,t=de(a)):(o=t,t=r)):(o=t,t=r),l--,t===r&&l===0&&f(Ut),t}function ze(){var t,a,i;return l++,t=o,b(),(a=C())!==r?(c.substr(o,2)===p?(i=p,o+=2):(i=r,l===0&&f(Ht)),i!==r?(d=t,t=ye(a)):(o=t,t=r)):(o=t,t=r),t===r&&(t=o,b(),(a=C())!==r?(c.substr(o,2)===it?(i=it,o+=2):(i=r,l===0&&f(Gt)),i!==r?(d=t,t=ve(a)):(o=t,t=r)):(o=t,t=r),t===r&&(t=o,b(),(a=C())!==r?(c.substr(o,2)===ct?(i=ct,o+=2):(i=r,l===0&&f(Kt)),i!==r?(d=t,t=we(a)):(o=t,t=r)):(o=t,t=r),t===r&&(t=o,b(),(a=C())!==r?(c.substr(o,2)===st?(i=st,o+=2):(i=r,l===0&&f(Lt)),i!==r?(d=t,t=xe(a)):(o=t,t=r)):(o=t,t=r),t===r&&(t=o,b(),(a=C())!==r?(c.substr(o,2)===lt?(i=lt,o+=2):(i=r,l===0&&f(Qt)),i!==r?(d=t,t=Ae(a)):(o=t,t=r)):(o=t,t=r),t===r&&(t=o,b(),(a=C())!==r?(c.substr(o,2)===ft?(i=ft,o+=2):(i=r,l===0&&f(Wt)),i!==r?(d=t,t=be(a)):(o=t,t=r)):(o=t,t=r)))))),l--,t===r&&l===0&&f(Bt),t}function Je(){var t,a,i;return l++,t=o,(a=C())!==r?(c.substr(o,3)===ht?(i=ht,o+=3):(i=r,l===0&&f(te)),i!==r?(d=t,t=Me(a)):(o=t,t=r)):(o=t,t=r),t===r&&(t=o,(a=C())!==r?(c.substr(o,3)===pt?(i=pt,o+=3):(i=r,l===0&&f(ee)),i!==r?(d=t,t=$e(a)):(o=t,t=r)):(o=t,t=r),t===r&&(t=o,(a=C())!==r?(c.substr(o,4)===mt?(i=mt,o+=4):(i=r,l===0&&f(re)),i!==r?(d=t,t=Fe(a)):(o=t,t=r)):(o=t,t=r),t===r&&(t=o,(a=C())!==r?(c.substr(o,4)===gt?(i=gt,o+=4):(i=r,l===0&&f(ne)),i!==r?(d=t,t=_e(a)):(o=t,t=r)):(o=t,t=r)))),l--,t===r&&(a=r,l===0&&f(Zt)),t}function Te(){var t,a;return l++,t=o,b(),(a=C())!==r?(d=t,t=Ce(a)):(o=t,t=r),l--,t===r&&l===0&&f(oe),t}function Xe(){var t,a,i,h;if(l++,t=o,c.charCodeAt(o)===35?(a=jt,o++):(a=r,l===0&&f(ue)),a!==r){if(i=[],vt.test(c.charAt(o))?(h=c.charAt(o),o++):(h=r,l===0&&f(Mt)),h!==r)for(;h!==r;)i.push(h),vt.test(c.charAt(o))?(h=c.charAt(o),o++):(h=r,l===0&&f(Mt));else i=r;i!==r?(d=t,t=Ee()):(o=t,t=r)}else o=t,t=r;return t===r&&(t=o,(a=tt())!==r&&(d=t,a=Oe(a)),(t=a)===r&&(t=o,(a=Et())!==r&&(d=t,a=Se()),t=a)),l--,t===r&&(a=r,l===0&&f(ae)),t}function C(){var t,a,i,h,M,v,E;for(t=o,wt.test(c.charAt(o))?(c.charAt(o),o++):l===0&&f($t),a=o,i=[],P.test(c.charAt(o))?(h=c.charAt(o),o++):(h=r,l===0&&f(Y));h!==r;)i.push(h),P.test(c.charAt(o))?(h=c.charAt(o),o++):(h=r,l===0&&f(Y));if(c.charCodeAt(o)===46?(h=It,o++):(h=r,l===0&&f(ie)),h!==r){if(M=[],P.test(c.charAt(o))?(v=c.charAt(o),o++):(v=r,l===0&&f(Y)),v!==r)for(;v!==r;)M.push(v),P.test(c.charAt(o))?(v=c.charAt(o),o++):(v=r,l===0&&f(Y));else M=r;M!==r?a=i=[i,h,M]:(o=a,a=r)}else o=a,a=r;if(a===r)if(a=[],P.test(c.charAt(o))?(i=c.charAt(o),o++):(i=r,l===0&&f(Y)),i!==r)for(;i!==r;)a.push(i),P.test(c.charAt(o))?(i=c.charAt(o),o++):(i=r,l===0&&f(Y));else a=r;if(a!==r){if(i=o,c.charCodeAt(o)===101?(h=Pt,o++):(h=r,l===0&&f(ce)),h!==r){if(wt.test(c.charAt(o))?(M=c.charAt(o),o++):(M=r,l===0&&f($t)),M===r&&(M=null),v=[],P.test(c.charAt(o))?(E=c.charAt(o),o++):(E=r,l===0&&f(Y)),E!==r)for(;E!==r;)v.push(E),P.test(c.charAt(o))?(E=c.charAt(o),o++):(E=r,l===0&&f(Y));else v=r;v!==r?i=h=[h,M,v]:(o=i,i=r)}else o=i,i=r;i===r&&(i=null),d=t,t=Re()}else o=t,t=r;return t}function De(t,a){return t.map(function(i){return i[a]})}function Ue(t,a,i){return[t].concat(De(a,i))}if((y=k())!==r&&o===c.length)return y;throw y!==r&&o<c.length&&f(ke()),Ne(Z,R<c.length?c.charAt(R):null,R<c.length?_t(R,R+1):_t(R,R))}return e(n,Error),n.prototype.format=function(c){var g="Error: "+this.message;if(this.location){var y,r=null;for(y=0;y<c.length;y++)if(c[y].source===this.location.source){r=c[y].text.split(/\r\n|\n|\r/g);break}var w=this.location.start,O=this.location.source+":"+w.line+":"+w.column;if(r){var k=this.location.end,N=u("",w.line.toString().length," "),I=r[w.line-1],m=(w.line===k.line?k.column:I.length+1)-w.column||1;g+=`
 --> `+O+`
`+N+` |
`+w.line+" | "+I+`
`+N+" | "+u("",w.column-1," ")+u("",m,"^")}else g+=`
 at `+O}return g},n.buildMessage=function(c,g){var y={literal:function(m){return'"'+w(m.text)+'"'},class:function(m){var x=m.parts.map(function(_){return Array.isArray(_)?O(_[0])+"-"+O(_[1]):O(_)});return"["+(m.inverted?"^":"")+x.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(m){return m.description}};function r(m){return m.charCodeAt(0).toString(16).toUpperCase()}function w(m){return m.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(x){return"\\x0"+r(x)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(x){return"\\x"+r(x)})}function O(m){return m.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(x){return"\\x0"+r(x)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(x){return"\\x"+r(x)})}function k(m){return y[m.type](m)}function N(m){var x,_,p=m.map(k);if(p.sort(),p.length>0){for(x=1,_=1;x<p.length;x++)p[x-1]!==p[x]&&(p[_]=p[x],_++);p.length=_}switch(p.length){case 1:return p[0];case 2:return p[0]+" or "+p[1];default:return p.slice(0,-1).join(", ")+", or "+p[p.length-1]}}function I(m){return m?'"'+w(m)+'"':"end of input"}return"Expected "+N(c)+" but "+I(g)+" found."},{SyntaxError:n,parse:s}},(Ot=kt).exports&&(Ot.exports=St());const ot={deg:1,grad:.9,rad:180/Math.PI,turn:360};function xr(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&ot[e.unit]!=null))throw new $("effect:type-error",`Expected <angle>, Actual: ${W(e)}`,{term:e})}const at={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function Ar(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&at[e.unit]!=null))throw new $("effect:type-error",`Expected <length>, Actual: ${W(e)}`,{term:e})}function S(e){wr(e);const n=e.value;return U(n,e),e.unit==="%"?.01*n:n}function br(e){return vr(e),U(e.value,e),e.value}function Mr(e){return xr(e),e.value*ot[e.unit]||0}function ut(e){return Ar(e),e.value*at[e.unit]||0}function $r(e){switch(e.colorType){case"hex":return Be(e.value);case"named":return Nt(e.value);case"function":return Cr(e.value)}}function Nt(e){if(!He(e))throw new $("effect:unknown-color",`color '${e}' isn't valid`,{namedColor:e});return Ge(e)}const Fr=/^rgba?/i,_r=/^hsla?/i;function Cr(e){if(J(e.parameters,4),Fr.test(e.name))return[S(e.parameters[0]),S(e.parameters[1]),S(e.parameters[2]),e.parameters[3]?S(e.parameters[3]):1];if(_r.test(e.name))return Ke(br(e.parameters[0]),S(e.parameters[1]),S(e.parameters[2]),e.parameters[3]?S(e.parameters[3]):1);throw new $("effect:syntax-error",`Invalid color function '${e.name}'`,{colorFunction:e})}export{G as a,Ir as d,lr as e,jr as h,sr as n};
